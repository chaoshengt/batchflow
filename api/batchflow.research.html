

<!doctype html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>batchflow.research &#8212; BatchFlow 0.3.0 documentation</title>
    <link rel="stylesheet" href="../_static/bizstyle.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../_static/bizstyle.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="batchflow.models.torch.layers" href="batchflow.models.torch.layers.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <!--[if lt IE 9]>
    <script type="text/javascript" src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="batchflow.models.torch.layers.html" title="batchflow.models.torch.layers"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">BatchFlow 0.3.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="batchflow.html" accesskey="U">API</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">batchflow.research</a><ul>
<li><a class="reference internal" href="#research">Research</a></li>
<li><a class="reference internal" href="#executableunit">ExecutableUnit</a></li>
<li><a class="reference internal" href="#grid">Grid</a></li>
<li><a class="reference internal" href="#option">Option</a></li>
<li><a class="reference internal" href="#kv">KV</a></li>
<li><a class="reference internal" href="#configalias">ConfigAlias</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="batchflow.models.torch.layers.html"
                        title="previous chapter">batchflow.models.torch.layers</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/api/batchflow.research.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="batchflow-research">
<h1>batchflow.research<a class="headerlink" href="#batchflow-research" title="Permalink to this headline">¶</a></h1>
<div class="section" id="research">
<h2>Research<a class="headerlink" href="#research" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="batchflow.research.Research">
<em class="property">class </em><code class="sig-name descname">Research</code><a class="reference internal" href="../_modules/batchflow/research/research.html#Research"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#batchflow.research.Research" title="Permalink to this definition">¶</a></dt>
<dd><p>Class Research for multiple parallel experiments with pipelines.</p>
<dl class="method">
<dt id="batchflow.research.Research.add_pipeline">
<code class="sig-name descname">add_pipeline</code><span class="sig-paren">(</span><em class="sig-param">root</em>, <em class="sig-param">branch=None</em>, <em class="sig-param">dataset=None</em>, <em class="sig-param">part=None</em>, <em class="sig-param">variables=None</em>, <em class="sig-param">name=None</em>, <em class="sig-param">execute='%1'</em>, <em class="sig-param">dump=-1</em>, <em class="sig-param">run=False</em>, <em class="sig-param">logging=False</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/batchflow/research/research.html#Research.add_pipeline"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#batchflow.research.Research.add_pipeline" title="Permalink to this definition">¶</a></dt>
<dd><p>Add new pipeline to research. Pipeline can be divided into root and branch. In that case root pipeline
will prepare batch that can be used by different branches with different configs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>root</strong> (<a class="reference internal" href="batchflow.pipeline.html#batchflow.Pipeline" title="batchflow.Pipeline"><em>Pipeline</em></a>) – a pipeline to execute when the research is run. It must contain <cite>run</cite> action with <cite>lazy=True</cite>.
Only if <cite>branch</cite> is None, <cite>root</cite> may contain parameters that can be defined by grid.</p></li>
<li><p><strong>branch</strong> (<a class="reference internal" href="batchflow.pipeline.html#batchflow.Pipeline" title="batchflow.Pipeline"><em>Pipeline</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.7)"><em>None</em></a>) – a parallelized pipeline to execute within the research.
Several copies of branch pipeline will be executed in parallel per each batch
received from the root pipeline.
May contain parameters that can be defined by grid.</p></li>
<li><p><strong>dataset</strong> (<a class="reference internal" href="batchflow.dataset.html#batchflow.Dataset" title="batchflow.Dataset"><em>Dataset</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.7)"><em>None</em></a>) – dataset that will be used with pipelines (see also <cite>part</cite>). If None, root or branch
must contain datatset.</p></li>
<li><p><strong>part</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.7)"><em>None</em></a>) – part of dataset to use (for example, <cite>train</cite>)</p></li>
<li><p><strong>variables</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em>, </em><em>list of str</em><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.7)"><em>None</em></a>) – names of pipeline variables to save after each iteration into results. All of them must be
defined in <cite>root</cite> if <cite>branch</cite> is None or be defined in <cite>branch</cite> if <cite>branch</cite> is not None.
If None, pipeline will be executed without any dumping.</p></li>
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – pipeline name. If None, pipeline will have name <cite>pipeline_{index}</cite></p></li>
<li><p><strong>execute</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em> or </em><em>list of int</em><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – <p>If -1, pipeline will be executed just at last iteration (if <cite>iteration + 1 == n_iters</cite>
or <cite>StopIteration</cite> was raised)</p>
<p>If positive int, pipeline will be excuted for that iteration</p>
<p>If str, must be <cite>‘%{step}’</cite> where step is int and function will be executed each <cite>step</cite> iterations.</p>
<p>If list, must be list of int or str descibed above</p>
</p></li>
<li><p><strong>dump</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em> or </em><em>list of int</em><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – iteration when results will be dumped and cleared. Similar to <cite>execute</cite></p></li>
<li><p><strong>run</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – if False then <cite>.next_batch()</cite> will be applied to pipeline, else <cite>.run()</cite> and then <cite>.reset_iter()</cite>.</p></li>
<li><p><strong>kwargs</strong> – <p>parameters in pipeline config that depends on the names of the other pipeline.</p>
<p>For example,
if test pipeline imports model from the other pipeline with name <cite>‘train’</cite> in Research,
corresponding parameter in <cite>import_model</cite> must be <cite>C(‘import_from’)</cite> and <cite>add_pipeline</cite>
must be called with parameter <cite>import_from=’train’</cite>.</p>
</p></li>
<li><p><strong>logging</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – include execution information to log file or not</p></li>
</ul>
</dd>
</dl>
<p><strong>How to define changing parameters</strong></p>
<p>All parameters in <cite>root</cite> or <cite>branch</cite> that are defined in grid should be defined
as <cite>C(‘parameter_name’)</cite>. Corresponding parameter in grid must have the same <cite>‘parameter_name’</cite>.</p>
</dd></dl>

<dl class="method">
<dt id="batchflow.research.Research.get_metrics">
<code class="sig-name descname">get_metrics</code><span class="sig-paren">(</span><em class="sig-param">pipeline</em>, <em class="sig-param">metrics_var</em>, <em class="sig-param">metrics_name</em>, <em class="sig-param">returns=None</em>, <em class="sig-param">execute='%1'</em>, <em class="sig-param">dump=-1</em>, <em class="sig-param">logging=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/batchflow/research/research.html#Research.get_metrics"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#batchflow.research.Research.get_metrics" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluate metrics.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pipeline</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – pipeline name</p></li>
<li><p><strong>metrics_var</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – pipeline variable which accumulate metrics</p></li>
<li><p><strong>metrics_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em> or </em><em>list of str</em>) – metrics to evaluate</p></li>
<li><p><strong>returns</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em>, </em><em>list of str</em><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.7)"><em>None</em></a>) – names to save metrics into results
if None, <cite>function</cite> will be executed without any saving results and dumping</p></li>
<li><p><strong>execute</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em> or </em><em>list of int</em><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – <p>If -1, metrics will be evaluated just at last iteration (if <cite>iteration + 1 == n_iters</cite>
or <cite>StopIteration</cite> was raised)</p>
<p>If positive int, metrics will be evaluated for that iteration</p>
<p>If str, must be <cite>‘%{step}’</cite> where step is int and metrics will be evaluated each <cite>step</cite> iterations.</p>
<p>If list, must be list of int or str descibed above</p>
</p></li>
<li><p><strong>dump</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em> or </em><em>list of int</em><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – iteration when results will be dumped and cleared. Similar to execute</p></li>
<li><p><strong>logging</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – include execution information to log file or not</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="batchflow.research.Research.add_function">
<code class="sig-name descname">add_function</code><span class="sig-paren">(</span><em class="sig-param">function</em>, <em class="sig-param">returns=None</em>, <em class="sig-param">name=None</em>, <em class="sig-param">execute='%1'</em>, <em class="sig-param">dump=-1</em>, <em class="sig-param">on_root=False</em>, <em class="sig-param">logging=False</em>, <em class="sig-param">*args</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/batchflow/research/research.html#Research.add_function"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#batchflow.research.Research.add_function" title="Permalink to this definition">¶</a></dt>
<dd><p>Add function to research.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>function</strong> (<em>callable</em>) – <dl>
<dt>callable object with following parameters:</dt><dd><dl>
<dt>experiment<span class="classifier"><cite>OrderedDict</cite> of Executable objects</span></dt><dd><p>all pipelines and functions that were added to Research</p>
</dd>
<dt>iteration<span class="classifier">int</span></dt><dd><p>iteration when function is called</p>
</dd>
</dl>
<p><a href="#id1"><span class="problematic" id="id2">**</span></a>args, <a href="#id3"><span class="problematic" id="id4">**</span></a>kwargs</p>
</dd>
</dl>
</p></li>
<li><p><strong>returns</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em>, </em><em>list of str</em><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.7)"><em>None</em></a>) – names for function returns to save into results
if None, <cite>function</cite> will be executed without any saving results and dumping</p></li>
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em> (</em><em>default None</em><em>)</em>) – function name. If None, a function will have name <cite>func_{index}</cite></p></li>
<li><p><strong>execute</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em> or </em><em>list of int</em><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – <p>If -1, function will be executed just at last iteration (if <cite>iteration + 1 == n_iters</cite>
or <cite>StopIteration</cite> was raised)</p>
<p>If positive int, function will be excuted for that iteration</p>
<p>If str, must be <cite>‘%{step}’</cite> where step is int and pipeline will be executed each <cite>step</cite> iterations.</p>
<p>If list, must be list of int or str descibed above</p>
</p></li>
<li><p><strong>dump</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em> or </em><em>list of int</em><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – iteration when results will be dumped and cleared. Similar to execute</p></li>
<li><p><strong>on_root</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – if False, function will be called with parameters <cite>(iteration, experiment, *args, **kwargs)</cite>,
else with <cite>(iteration, experiments, *args, **kwargs)</cite> where <cite>experiments</cite> is a list of single experiments</p></li>
<li><p><strong>logging</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – include execution information to log file or not</p></li>
<li><p><strong>args</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)"><em>list</em></a>) – args for the function</p></li>
<li><p><strong>kwargs</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)"><em>dict</em></a>) – kwargs for the function</p></li>
</ul>
</dd>
</dl>
<p><strong>How to use experiment</strong></p>
<p>Each pipeline and function added to Research is saved as an <a class="reference internal" href="#batchflow.research.research.Executable" title="batchflow.research.research.Executable"><code class="xref py py-class docutils literal notranslate"><span class="pre">Executable</span></code></a>.</p>
<p>Experiment is an <cite>OrderedDict</cite> of all pipelines and functions that were added to Research
and are running in current Job. Key is a name of <cite>Executable</cite>, value is <cite>Executable</cite>.</p>
</dd></dl>

<dl class="method">
<dt id="batchflow.research.Research.add_grid">
<code class="sig-name descname">add_grid</code><span class="sig-paren">(</span><em class="sig-param">grid_config</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/batchflow/research/research.html#Research.add_grid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#batchflow.research.Research.add_grid" title="Permalink to this definition">¶</a></dt>
<dd><p>Add grid of pipeline parameters. Configs from that grid will be generated
and then substitute into pipelines.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>grid_config</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)"><em>dict</em></a><em>, </em><a class="reference internal" href="#batchflow.research.Grid" title="batchflow.research.Grid"><em>Grid</em></a><em> or </em><a class="reference internal" href="#batchflow.research.Option" title="batchflow.research.Option"><em>Option</em></a>) – if dict it should have items parameter_name: list of values.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="batchflow.research.Research.load_results">
<code class="sig-name descname">load_results</code><span class="sig-paren">(</span><em class="sig-param">*args</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/batchflow/research/research.html#Research.load_results"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#batchflow.research.Research.load_results" title="Permalink to this definition">¶</a></dt>
<dd><p>Load results of research as pandas.DataFrame or dict (see Results.load).</p>
</dd></dl>

<dl class="method">
<dt id="batchflow.research.Research.run">
<code class="sig-name descname">run</code><span class="sig-paren">(</span><em class="sig-param">n_reps=1</em>, <em class="sig-param">n_iters=None</em>, <em class="sig-param">workers=1</em>, <em class="sig-param">branches=1</em>, <em class="sig-param">n_splits=None</em>, <em class="sig-param">shuffle=False</em>, <em class="sig-param">name=None</em>, <em class="sig-param">bar=False</em>, <em class="sig-param">gpu=None</em>, <em class="sig-param">worker_class=None</em>, <em class="sig-param">timeout=5</em>, <em class="sig-param">trails=2</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/batchflow/research/research.html#Research.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#batchflow.research.Research.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Run research.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>n_reps</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – number of repetitions with each combination of parameters from <cite>grid_config</cite></p></li>
<li><p><strong>n_iters</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.7)"><em>None</em></a>) – number of iterations for each configurations. If None, wait StopIteration exception for at least
one pipeline.</p></li>
<li><p><strong>workers</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a><em> or </em><em>list of dicts</em><em> (</em><em>Configs</em><em>)</em>) – <p>If int - number of workers to run pipelines or workers that will run them, <cite>PipelineWorker</cite> will be used.</p>
<p>If list of dicts (Configs) - list of additional configs which will be appended to configs from tasks.</p>
<p>Each element corresponds to one worker.</p>
</p></li>
<li><p><strong>branches</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a><em> or </em><em>list of dicts</em><em> (</em><em>Configs</em><em>)</em>) – <p>Number of different branches with different configs with the same root. Each branch will use the same batch
from <cite>root</cite>. Pipelines will be executed in different threads.</p>
<p>If int - number of pipelines with different configs that will use the same prepared batch
from <cite>root</cite>.</p>
<p>If list of dicts (Configs) - list of dicts with additional configs to each pipeline.</p>
</p></li>
<li><p><strong>n_splits</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.7)"><em>None</em></a>) – number of folds for cross-validation.</p></li>
<li><p><strong>shuffle</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – cross-validation parameter</p></li>
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.7)"><em>None</em></a>) – name folder to save research. By default is ‘research’.</p></li>
<li><p><strong>bar</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a><em> or </em><em>callable</em>) – Whether to show a progress bar.
If callable, it must have the same signature as <cite>tqdm</cite>.</p></li>
<li><p><strong>gpu</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)"><em>list</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.7)"><em>None</em></a>) – <p>all gpu devices available for the research.</p>
<p>Must be of length 1 or be divisible
by the number of workers.</p>
<p>If is divisible by the number of workers then
<cite>length / n_workers</cite> must be 1 or be divisible by the number of branches. If you want to use different
devices in branches, use expression <cite>C(‘device’)</cite>.</p>
<p>For example, for <a class="reference internal" href="batchflow.models.tf.base.html#batchflow.models.tf.base.TFModel" title="batchflow.models.tf.base.TFModel"><code class="xref py py-class docutils literal notranslate"><span class="pre">TFModel</span></code></a> add <cite>device=C(‘device’)</cite> to model config.
if None, default gpu configuration will be used</p>
</p></li>
<li><p><strong>timeout</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – each job will be killed if it doesn’t answer more then that time in minutes</p></li>
<li><p><strong>trails</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – trails to execute job</p></li>
<li><p><strong>does it work**</strong> (<em>**How</em>) – </p></li>
<li><p><strong>each iteration all pipelines and functions will be executed in the order in which were added.</strong> (<em>At</em>) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="batchflow.research.Research.save">
<code class="sig-name descname">save</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/batchflow/research/research.html#Research.save"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#batchflow.research.Research.save" title="Permalink to this definition">¶</a></dt>
<dd><p>Save description of the research to folder name/description.</p>
</dd></dl>

<dl class="method">
<dt id="batchflow.research.Research.load">
<em class="property">classmethod </em><code class="sig-name descname">load</code><span class="sig-paren">(</span><em class="sig-param">name</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/batchflow/research/research.html#Research.load"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#batchflow.research.Research.load" title="Permalink to this definition">¶</a></dt>
<dd><p>Load description of the research from name/description.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="executableunit">
<h2>ExecutableUnit<a class="headerlink" href="#executableunit" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="batchflow.research.research.Executable">
<em class="property">class </em><code class="sig-name descname">Executable</code><a class="reference internal" href="../_modules/batchflow/research/research.html#Executable"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#batchflow.research.research.Executable" title="Permalink to this definition">¶</a></dt>
<dd><p>Function or pipeline</p>
<p><strong>Attributes</strong></p>
<dl class="simple">
<dt>function<span class="classifier">callable</span></dt><dd><p>is None if <cite>Executable</cite> is a pipeline</p>
</dd>
<dt>pipeline<span class="classifier">Pipeline</span></dt><dd><p>is None if <cite>Executable</cite> is a function</p>
</dd>
<dt>root_pipeline<span class="classifier">Pipeline</span></dt><dd><p>is None if <cite>Executable</cite> is a function or pipeline is not divided into root and branch</p>
</dd>
<dt>dataset<span class="classifier">Dataset or None</span></dt><dd><p>dataset for pipelines</p>
</dd>
<dt>part<span class="classifier">str or None</span></dt><dd><p>part of dataset to use</p>
</dd>
<dt>cv_split<span class="classifier">int or None</span></dt><dd><p>partition of dataset</p>
</dd>
<dt>result<span class="classifier">dict</span></dt><dd><p>current results of the <cite>Executable</cite>. Keys are names of variables (for pipeline)
or returns (for function) values are lists of variable values</p>
</dd>
<dt>path<span class="classifier">str</span></dt><dd><p>path to the folder where results will be dumped</p>
</dd>
</dl>
<p>exec : int, list of ints or None
dump : int, list of ints or None
to_run : bool
variables : list</p>
<blockquote>
<div><p>variables (for pipeline) or returns (for function)</p>
</div></blockquote>
<p>on_root : bool</p>
<p>args : list</p>
<p>kwargs : dict()</p>
</dd></dl>

</div>
<div class="section" id="grid">
<h2>Grid<a class="headerlink" href="#grid" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="batchflow.research.Grid">
<em class="property">class </em><code class="sig-name descname">Grid</code><span class="sig-paren">(</span><em class="sig-param">grid=None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/batchflow/research/grid.html#Grid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#batchflow.research.Grid" title="Permalink to this definition">¶</a></dt>
<dd><p>Class for grid of parameters. <cite>Grid</cite> is a list of list of Options. Each list of Options
will produce configs as an Cartesian multiplications of Option values.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>grid</strong> (<a class="reference internal" href="#batchflow.research.Option" title="batchflow.research.Option"><em>Option</em></a><em>, </em><a class="reference internal" href="#batchflow.research.Grid" title="batchflow.research.Grid"><em>Grid</em></a><em> or </em><em>list of lists of Options</em>) – </p>
</dd>
</dl>
<p><strong>Operations with Grids</strong></p>
<ol class="arabic simple">
<li><p>sum by <cite>+</cite>: Concatenate list of Configs generated by Grids</p></li>
<li><p>multiplication by <cite>*</cite>: Cartesian multiplications of Options in Grid.
For example, if <cite>grid1 = Option(‘a’: [1, 2])</cite> and
<cite>grid1 = Option(‘b’: [3, 4])</cite> then <cite>grid1 * grid2</cite> will have both options and generate 4 configs:
<cite>{a: 1, b: 3}</cite>, <cite>{a: 1, b: 4}</cite>, <cite>{a: 2, b: 3}</cite>, <cite>{a: 2, b: 4}</cite>.</p></li>
</ol>
<dl class="method">
<dt id="batchflow.research.Grid.alias">
<code class="sig-name descname">alias</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/batchflow/research/grid.html#Grid.alias"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#batchflow.research.Grid.alias" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns alias of Grid.</p>
</dd></dl>

<dl class="method">
<dt id="batchflow.research.Grid.description">
<code class="sig-name descname">description</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/batchflow/research/grid.html#Grid.description"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#batchflow.research.Grid.description" title="Permalink to this definition">¶</a></dt>
<dd><p>Return description of used aliases.
:returns:
:rtype: dict</p>
</dd></dl>

<dl class="method">
<dt id="batchflow.research.Grid.gen_configs">
<code class="sig-name descname">gen_configs</code><span class="sig-paren">(</span><em class="sig-param">n_items=1</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/batchflow/research/grid.html#Grid.gen_configs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#batchflow.research.Grid.gen_configs" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate Configs from grid</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>n_items</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – how much configs return on each iteration</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="batchflow.research.Grid.subset">
<code class="sig-name descname">subset</code><span class="sig-paren">(</span><em class="sig-param">grid</em>, <em class="sig-param">by_alias=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/batchflow/research/grid.html#Grid.subset"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#batchflow.research.Grid.subset" title="Permalink to this definition">¶</a></dt>
<dd><p>Get grid subset produces by another grid</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>grid</strong> (<a class="reference internal" href="#batchflow.research.Grid" title="batchflow.research.Grid"><em>Grid</em></a>) – </p></li>
<li><p><strong>by_alias</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – if True, perform subsetting by aliases, else by real values</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="batchflow.research.Grid.value">
<code class="sig-name descname">value</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/batchflow/research/grid.html#Grid.value"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#batchflow.research.Grid.value" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns config of Grid.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="option">
<h2>Option<a class="headerlink" href="#option" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="batchflow.research.Option">
<em class="property">class </em><code class="sig-name descname">Option</code><span class="sig-paren">(</span><em class="sig-param">parameter</em>, <em class="sig-param">values</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/batchflow/research/grid.html#Option"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#batchflow.research.Option" title="Permalink to this definition">¶</a></dt>
<dd><p>Class for single-parameter option. There is an algebra of options (see <a class="reference internal" href="#batchflow.research.Grid" title="batchflow.research.Grid"><code class="xref py py-class docutils literal notranslate"><span class="pre">Grid</span></code></a> operations)
Result is a <cite>Grid</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>parameter</strong> (<a class="reference internal" href="#batchflow.research.KV" title="batchflow.research.KV"><em>KV</em></a><em> or </em><em>obj</em>) – </p></li>
<li><p><strong>values</strong> (<em>list of KV</em><em> or </em><em>lis of obj</em>) – </p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="batchflow.research.Option.alias">
<code class="sig-name descname">alias</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/batchflow/research/grid.html#Option.alias"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#batchflow.research.Option.alias" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns alias of the Option</p>
</dd></dl>

<dl class="method">
<dt id="batchflow.research.Option.gen_configs">
<code class="sig-name descname">gen_configs</code><span class="sig-paren">(</span><em class="sig-param">n_items=1</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/batchflow/research/grid.html#Option.gen_configs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#batchflow.research.Option.gen_configs" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns Configs created from the option</p>
</dd></dl>

<dl class="method">
<dt id="batchflow.research.Option.option">
<code class="sig-name descname">option</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/batchflow/research/grid.html#Option.option"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#batchflow.research.Option.option" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns config</p>
</dd></dl>

<dl class="method">
<dt id="batchflow.research.Option.product">
<em class="property">classmethod </em><code class="sig-name descname">product</code><span class="sig-paren">(</span><em class="sig-param">*args</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/batchflow/research/grid.html#Option.product"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#batchflow.research.Option.product" title="Permalink to this definition">¶</a></dt>
<dd><p>Element-wise product of options</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="kv">
<h2>KV<a class="headerlink" href="#kv" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="batchflow.research.KV">
<em class="property">class </em><code class="sig-name descname">KV</code><span class="sig-paren">(</span><em class="sig-param">value</em>, <em class="sig-param">alias=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/batchflow/research/grid.html#KV"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#batchflow.research.KV" title="Permalink to this definition">¶</a></dt>
<dd><p>Class for value and alias</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>value</strong> (<em>obj</em>) – </p></li>
<li><p><strong>alias</strong> (<em>obj</em>) – if None alias will be equal to value.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="configalias">
<h2>ConfigAlias<a class="headerlink" href="#configalias" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="batchflow.research.ConfigAlias">
<em class="property">class </em><code class="sig-name descname">ConfigAlias</code><span class="sig-paren">(</span><em class="sig-param">config</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/batchflow/research/grid.html#ConfigAlias"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#batchflow.research.ConfigAlias" title="Permalink to this definition">¶</a></dt>
<dd><p>Class for config and alias which is represenation of config where all keys and values are str.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>config</strong> (<em>list of</em><em> (</em><em>key</em><em>, </em><em>value</em><em>)</em>) – keys and values are KV or objects</p>
</dd>
</dl>
<dl class="method">
<dt id="batchflow.research.ConfigAlias.alias">
<code class="sig-name descname">alias</code><span class="sig-paren">(</span><em class="sig-param">as_string=False</em>, <em class="sig-param">delim='-'</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/batchflow/research/grid.html#ConfigAlias.alias"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#batchflow.research.ConfigAlias.alias" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns alias.</p>
</dd></dl>

<dl class="method">
<dt id="batchflow.research.ConfigAlias.config">
<code class="sig-name descname">config</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/batchflow/research/grid.html#ConfigAlias.config"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#batchflow.research.ConfigAlias.config" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns values.</p>
</dd></dl>

</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="batchflow.models.torch.layers.html" title="batchflow.models.torch.layers"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">BatchFlow 0.3.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="batchflow.html" >API</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2017, Analysis Center.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.1.2.
    </div>
  </body>
</html>